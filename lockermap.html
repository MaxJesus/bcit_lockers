<!DOCTYPE html>
<html lang="en">

<head>
  <title>Personal Locker Management</title>

  <meta charset="utf-8" />

  <!-- Bootstrap for Mobile-first -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-firestore.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
  
  <!--This file works as the overall stylesheet for the project-->
  <link type="text/css" rel="stylesheet" href="style/lockermanagement.css">

  <!--This file works as the overall stylesheet for lockermap-->
  <link type="text/css" rel="stylesheet" href="style/lockermap.css">

  
</head>

<body>
  <div id="headerContainer">
    <div id="header">

      <div class="spinner-grow" role="status">
        <span class="sr-only">Loading...</span>
      </div>

      <img src=img/logo.png id="logo" alt="logo"/>

      <img src="img/profile.png" id="profile" alt="profilePic" />

    </div>


  </div>

  <div id="promptBox" class="alert alert-success" role="alert">
    <span>Please Choose a <span>section</span> to view the available lockers</span>
  </div>
  
  <!--A div that allows the user to choose a section to view avaiable lockers-->
  <div id="sectionChoice" class="1">
    <div id="NW"><span>NW:</span> <span id="counterNW"> </span> <span>available lockers left</span></div>
    <div id="NE"><span>NE:</span> <span id="counterNE"> </span> <span>available lockers left</span></div>
    <div id="SW"><span>SW:</span> <span id="counterSW"> </span> <span>available lockers left</span></div>
    <div id="SE"><span>SE:</span> <span id="counterSE"> </span> <span>available lockers left</span></div>
  </div>
  
  
  <!--A div that allows the user to choose a building to view avaiable lockers-->
  <div id="buildings">
  <div id="NW-buildings" class="2">
    <div id="NW3"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="NW3Btn" name="NW3" >NW3</button><span>NW3</span> <span id="NW3data"> </span> <span>available lockers left</span></div>
    
    <div id="NW1"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="NW1Btn" name="NW1" >NW1</button><span>NW1:</span> <span id="NW1data"> </span> <span>available lockers left</span></div>
    
    <div id="NW5"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="NW5Btn" name="NW5" >NW5</button><span>NW5</span> <span id="NW5data"> </span> <span>available lockers left</span></div>
    
    <div id="NW6"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="NW6Btn" name="NW6">NW6</button><span>NW6:</span> <span id="NW6data"> </span> <span>available lockers left</span></div>
    
  </div>
  
  <div class="SW-buildings" class="2">
    <div id="SW1"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="SW1Btn" name="SW1" >SW1</button><span>SW1</span> <span id="SW1data"> </span> <span>available lockers left</span></div>
    
    <div id="SW2"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="SW2Btn" name="SW2">SW2</button> <span>SW2: </span> <span id="SW2data" name="SW2"> </span> <span>available lockers left</span></div>
    
    <div id="SW3"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="SW3Btn" name="SW3">SW3</button><span>SW3: </span> <span id="SW3data" name="SW3"> </span> <span>available lockers left</span></div>
    
    <div id="SW5"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="SW5Btn" name="SW5">SW5</button><span>SW5: </span> <span id="SW5data" name="SW5"> </span> <span>available lockers left</span></div>
    
    <div id="SW9"><button type="button" class="btn btn-secondary btn-lg, btnbuilding" id="SW9Btn" name="SW9">SW9</button><span>SW9: </span> <span id="SW9data" name="SW9"> </span> <span>available lockers left</span></div>
  </div>
    
  <div class="3" class="floor">
      
  </div>
    
    
  <div id="goBackBtnDiv">
    <button id="goBackBtn">goBack</button>
  </div>
    
</div>
  
  
  <script>
      let step = 1;
    
    //the "step" variable stores which step the process is at.
  
    
    function stepControl(){
      switch(step) {
        case 1:
          $("#goBackBtn").hide();
          $(".1").show();
          $(".2").hide();
//          $(".SW-buildings").hide();
         
          break;
        case 2:
          $("#goBackBtn").show();
          
           break;
          
        case 3:
          $("#sectionChoice").hide();
           break;
        case 4:
           break;
      }
    }
    
    
    
    
    $("#NW").click(function(){
      $("#NW-buildings").show();
      $("#sectionChoice").hide();
      step=2;
      stepControl();
    });
    
    
    
    $("#SW").click(function(){
      $("#SW-buildings").show();
      $("#sectionChoice").hide();
      step=2;
      stepControl();
    });
    
    
    
    $("#NE").click(function(){
      $("#NE-buildings").show();
      $("#sectionChoice").hide();
       step=2;
       stepControl();
    });
    
     
    
    
    
    $("#goBackBtn").click(function(){
      console.log(step);
      step--;
      stepControl();
    });
    
    
    var buildingButton = $(".btnbuilding");
    
    $(buildingButton).click(function(e){
         
          var buildingNum = $(e.target).attr("name");
          console.log(buildingButton.length);
           console.log("Current Sections is ", buildingNum);
          step = 3;
          return buildingNum;
     });
    
    var firebaseConfig = {
      apiKey: "AIzaSyASFWH5KsgmLDY3HcRUmDIwbFtYv5Ayf8o",
      authDomain: "bcit-lockers.firebaseapp.com",
      databaseURL: "https://bcit-lockers.firebaseio.com",
      projectId: "bcit-lockers",
      storageBucket: "bcit-lockers.appspot.com",
      messagingSenderId: "380958555512",
      appId: "1:380958555512:web:3a1928344614d15da51c8d",
      measurementId: "G-R8V8WMCJRB"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    function showVacancy() {
      
    db.collection('lockerinfo').doc('nqsuYINSdLRJSCJBEO9G').onSnapshot(function(snap){
         
          $("#counterNE").html(snap.data().NE);
          $("#counterNW").html(snap.data().NW);
          $("#counterSW").html(snap.data().SW);
          $("#counterSE").html(snap.data().SE);
      }
    )}
    showVacancy()
      
    
    
    
    
    
    
    
   stepControl();
    
  
   
  

    
    
    
    
//    $(".SW-buildings").click(function(){
//         var SW = $("button[name^='SW']");
//      var SWlist = [1];
//      SWlist.push(SW.forEach());
//      let buildingNum = -1;
//      SWlist[]
//
//    })
    
  </script>
</body>

</html>
